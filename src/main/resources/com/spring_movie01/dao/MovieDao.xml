<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.spring_movie01.dao.MovieDao"> 
				<!-- Dao가 있는 패키지.Dao명 -->
  	<select id="selectMovieList" resultType="com.spring_movie01.dto.MovieDto">
  		<!-- id : Dao가 호출되는 메소드명 / resultType : resultSet에 담기는 것을 어느 객체로 담을지-->
  		SELECT MVCODE,MVNAME,MVPD,MVACTOR,MVGENRE,MVAGE,MVTIME,TO_CHAR(MVOPEN,'YYYY.MM.DD') AS MVOPEN,MVPOSTER 
  		FROM MOVIES
  		ORDER BY MVCODE
 	 </select>

	<select id="selectMovieInfo" resultType="com.spring_movie01.dto.MovieDto">
		SELECT MVCODE,MVNAME,MVPD,MVACTOR,MVGENRE,MVAGE,MVTIME,TO_CHAR(MVOPEN,'YYYY.MM.DD') AS MVOPEN,MVPOSTER
		FROM MOVIES
		WHERE MVCODE=#{mvcode}
	</select>
	
	<select id="selectReserveMvList" resultType="com.spring_movie01.dto.MovieDto">
		SELECT *
		FROM MOVIES
		WHERE MVCODE IN (SELECT SCMVCODE FROM SCHEDULES)
	</select>

</mapper>